<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Insights</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    {% load static %}
    <link rel="stylesheet" href="{% static 'musicinsights/css/style.css' %}" />
  </head>

  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="brand">
          <i class="ph ph-music-notes-simple"></i>
          <h1>Music Insights</h1>
        </div>
        <nav>
          <a href="/" class="nav-item active"
            ><i class="ph ph-squares-four"></i> Dashboard</a
          >
          <a href="{% url 'upload_file' %}" class="nav-item"
            ><i class="ph ph-upload-simple"></i> Upload</a
          >
          <a href="#" class="nav-item"><i class="ph ph-gear"></i> Settings</a>

          <div
            style="
              margin-top: 2rem;
              padding-top: 1rem;
              border-top: 1px solid var(--card-border);
            "
          >
            <p
              style="
                color: var(--text-muted);
                font-size: 0.75rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                margin-bottom: 1rem;
                padding-left: 1rem;
              "
            >
              History
            </p>
            {% for dash in recent_uploads %}
            <div
              style="
                display: flex;
                align-items: center;
                gap: 4px;
                margin-bottom: 4px;
              "
            >
              <a
                href="{% url 'dashboard' dash.id %}"
                class="nav-item {% if current_playlist_id == dash.id %}active{% endif %}"
                style="flex: 1; margin-bottom: 0; min-width: 0"
                title="{{ dash.name }}"
              >
                <i class="ph ph-clock-counter-clockwise"></i>
                <span class="history-item-name" data-name="{{dash.name}}"
                  >{{dash.name}}</span
                >
              </a>
              <a
                href="{% url 'delete_history' dash.id %}"
                style="
                  padding: 8px;
                  color: var(--text-muted);
                  opacity: 0.5;
                  transition: all 0.2s;
                  border-radius: 6px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                "
                onmouseover="this.style.opacity='1'; this.style.color='#ff4444'; this.style.backgroundColor='rgba(255, 68, 68, 0.1)'"
                onmouseout="this.style.opacity='0.5'; this.style.color='var(--text-muted)'; this.style.backgroundColor='transparent'"
                title="Delete"
              >
                <i class="ph ph-trash"></i>
              </a>
            </div>
            {% endfor %}
          </div>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content">{% block content %} {% endblock %}</main>
    </div>

    <!-- ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    {% block scripts %} {% endblock %}
  </body>
</html>
